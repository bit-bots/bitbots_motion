#ShutDownProcedure
$PickedUp
    PICKED_UP --> @TurnMotorsOff, @StayShutDown
    ON_GROUND --> @PlayAnimationSitDown, @TurnMotorsOff, @StayShutDown

-->HCM
$StartHCM
    NOT_WALKREADY --> @Wait + time:0.1 + r:false, @PlayAnimationDynup + direction:walkready + initial:true + r:false
    SHUTDOWN_REQUESTED --> #ShutDownProcedure
    SHUTDOWN_WHILE_HARDWARE_PROBLEM --> @StayShutDown
    RUNNING --> $Stop
        STOPPED -->  @ForceStopWalking, @PlayAnimationDynup + direction:walkready + initial:true + r:false, @StayStopped
        FREE -->$Record
            RECORD_ACTIVE --> @StayRecord
            FREE --> $CheckMotors
                MOTORS_NOT_STARTED --> @WaitForMotorStartup
                OVERLOAD --> @PlayAnimationDynup + direction:descend, @TurnMotorsOff, @StayMotorsOff
                PROBLEM --> @WaitForMotors
                TURN_OFF --> @PlayAnimationDynup + direction:descend, @TurnMotorsOff, @StayMotorsOff
                TURN_ON --> @TurnMotorsOn, @PlayAnimationDynup + direction:rise
                OKAY --> $CheckIMU
                    IMU_NOT_STARTED --> @WaitForIMUStartup
                    PROBLEM --> @WaitForIMU
                    OKAY --> $CheckPressureSensor
                        PRESSURE_NOT_STARTED --> @WaitForPressureStartup
                        PROBLEM --> @WaitForPressure
                        OKAY --> $PickedUp
                            PICKED_UP --> @PlayAnimationDynup + direction:walkready, @StayPickedUp
                            ON_GROUND --> $Fallen
                                FALLEN_FRONT --> @CancelGoals, @PlayAnimationDynup + direction:front
                                FALLEN_BACK --> @CancelGoals, @SetFootZero, @PlayAnimationDynup + direction:back
                                FALLEN_RIGHT --> @CancelGoals, @TurnRightToBack + duration:1.5, @PlayAnimationDynup + direction:back
                                FALLEN_LEFT --> @CancelGoals, @TurnLeftToBack + duration:1.5, @PlayAnimationDynup + direction:back
                                NOT_FALLEN --> $Falling
                                    FALLING_LEFT --> @CancelGoals, @FallingPoseLeft + duration:0.5
                                    FALLING_RIGHT --> @CancelGoals, @FallingPoseRight + duration:0.5
                                    FALLING_FRONT --> @CancelGoals, @FallingPoseFront + duration:0.5
                                    FALLING_BACK --> @CancelGoals, @FallingPoseBack + duration:0.5
                                    NOT_FALLING --> $Sitting
                                        YES --> @PlayAnimationDynup + direction:rise
                                        NO --> $ExternalAnimation
                                            ANIMATION_RUNNING --> @StayAnimationRunning
                                            FREE --> $Walking
                                                STOP_WALKING --> @StopWalking
                                                STAY_WALKING --> @StayWalking
                                                NOT_WALKING --> $Kicking
                                                    KICKING --> @StayKicking
                                                    NOT_KICKING --> @StayControlable
